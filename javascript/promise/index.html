<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <h1>Promise</h1>

    <div class="container">

        <!-- <div class="card">
            <img src="https://i.redd.it/milr969373561.jpg" alt="">
            <h3>Name</h3>
            <div class="contact">
                <span>email</span>
                <span>phone</span>
            </div>

            <div class="address">
                <p>address1</p>
                <p>address1</p>
                <p>address1</p>
            </div>
        </div>
        <div class="card">
            <img src="https://i.redd.it/milr969373561.jpg" alt="">
            <h3>Name</h3>
            <div class="contact">
                <span>email</span>
                <span>phone</span>
            </div>

            <div class="address">
                <p>address1</p>
                <p>address1</p>
                <p>address1</p>
            </div>
        </div>
        <div class="card">
            <img src="https://i.redd.it/milr969373561.jpg" alt="">
            <h3>Name</h3>
            <div class="contact">
                <span>email</span>
                <span>phone</span>
            </div>

            <div class="address">
                <p>address1</p>
                <p>address1</p>
                <p>address1</p>
            </div>
        </div>
        <div class="card">
            <img src="https://i.redd.it/milr969373561.jpg" alt="">
            <h3>Name</h3>
            <div class="contact">
                <span>email</span>
                <span>phone</span>
            </div>

            <div class="address">
                <p>address1</p>
                <p>address1</p>
                <p>address1</p>
            </div>
        </div>
        <div class="card">
            <img src="https://i.redd.it/milr969373561.jpg" alt="">
            <h3>Name</h3>
            <div class="contact">
                <span>email</span>
                <span>phone</span>
            </div>

            <div class="address">
                <p>address1</p>
                <p>address1</p>
                <p>address1</p>
            </div>
        </div> -->

    </div>

    <!-- error handling -->
    <script>
        let container = document.querySelector(".container");
        let getData = () => {

            container.innerHTML = `<i class="fa fa-spinner fa-spin" style="font-size:15rem"></i>`;


            setInterval(async () => {
                let data = await fetch("https://jsonplaceholder.typicode.com/users")

                if (data.ok = true) {
                    let finaldata = await data.json();
                    console.log(finaldata)
                    let cardData = '';
                    finaldata.forEach(element => {
                        // console.log(element)

                        cardData += `
                 <div class="card">
                        <img src="https://i.redd.it/milr969373561.jpg" alt="">
                        <h3>${element.name}</h3>
                        <div class="contact">
                            <span>${element.email}</span>
                            <span>${element.phone}</span>
                        </div>

                        <div class="address">
                            <p>${element.address.street}</p>
                            <p>${element.address.city}</p>
                            <p>${element.address.zipcode}</p>
                        </div>
                    </div>
                `;

                        // console.log(cardData)

                    });

                    container.innerHTML = cardData;
                } else {
                    document.querySelector(".container").innerHTML = "No Record Found";
                }


            }, 1000)


        }

        getData()


        // fetch("https://jsonplaceholder.typicode.com/users").then((data) => {
        //     return data.json()
        // })
        // .then((finalData)=>{
        //     // console.log(finalData)

        //     let cardData = '';
        //     finalData.forEach(element => {
        //         // console.log(element)

        //         cardData+=`
        //          <div class="card">
        //                 <img src="https://i.redd.it/milr969373561.jpg" alt="">
        //                 <h3>${element.name}</h3>
        //                 <div class="contact">
        //                     <span>${element.email}</span>
        //                     <span>${element.phone}</span>
        //                 </div>

        //                 <div class="address">
        //                     <p>${element.address.street}</p>
        //                     <p>${element.address.city}</p>
        //                     <p>${element.address.zipcode}</p>
        //                 </div>
        //             </div>
        //         `;

        //         // console.log(cardData)

        //     });

        //     document.querySelector(".container").innerHTML = cardData;

        // })
        // .catch((err) => {
        //     console.log(err)
        // })






















        // server
        // let mypromise = new Promise((resolve, reject) => {
        //     let success = true;

        //     if (success) {
        //         resolve("Operation Success");
        //     } else {
        //         reject("Operation Failed")
        //     }
        // })

        // mypromise.then((data) => {
        //     console.log(" =>",data)

        // }).catch((err) => {
        //     console.log("err =>",err)
        // })

        // try {
        //     const a = 5;
        //     // a = 60;

        //     console.log(a)
        // } catch (err) {

        //     console.log("Error occur => ", err)
        // }
        // finally{
        //     console.log("Process is End")
        // }
    </script>
</body>

</html>